{% extends "base.html" %} {% block content %}
<h1>{{ event.name }}</h1>
<p>
    <strong>Date:</strong> {{ event.date }}<br />
    <strong>Location:</strong> {{ event.location.city }}, {{ event.location.state }}
</p>
<h2>Observations</h2>
{% if observations %}
<div class="table-responsive">
    <table class="table table-striped table-bordered">
        <thead class="thead-dark">
            <tr>
                <th>Timestamp</th>
                <th>Count</th>
                <th>Method</th>
                <th>Observer</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody>
	    {% for obs in observations %}
            <tr onclick="window.location.href='{% url 'counts:observation_detail' obs.id %}'" style="cursor: pointer">
                <td>{{ obs.timestamp|date:"Y-m-d H:i" }}</td>
                <td>{{ obs.count }}</td>
                <td>{{ obs.get_method_display }}</td>
                <td>{{ obs.observer|default:"—" }}</td>
                <td>{{ obs.created_at|date:"Y-m-d H:i" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>
{% else %}
<p><em>No observations recorded for this event.</em></p>
{% endif %}

<!-- Add Observation Button -->
<div class="d-flex justify-content-between mt-4 mb-3">
    <a href="{% url 'counts:event_list' %}" class="btn btn-secondary">&larr; Back to all events</a>
    <a href="{% url 'counts:add_observation' event.id %}" class="btn btn-primary">➕ Add Observation</a>
    <a href="{% url 'counts:estimate' event.id %}" class="btn btn-primary">Computer Estimate</a>
</div>
{% endblock %}
